Система управления версионностью.


1. Информация о версии хранится в таблице `update`.
Расшифровка столбцов приводится ниже
- date - дата последнего обновления состояния системы;
- date_version - версия на дату последнего обновления системы;
- number_revision - номер ревизии.


2. Предполагается, что в таблице содержится множество записей
об уже выполненных апдейтах, соответственно обновление информации
о состоянии системы выполняется таким образом

INSERT INTO `update` (`date`, `date_version`, `number_revision`) VALUES ('20120404', '0.1.0', '387');


3. Обновление базы данных выполняется с помощью sql или pl/sql скриптов,
формат имени файлов: YYYYMMDD_NumberRevision_N.N.N, где
YYYYMMDD - `date`, NumberRevision - `number_revision`, N.N.N - `date_version`.

Файлы следует располагать в директории `flexbuh-db/update`.

В файле обязательно должна содержаться строчка с обновлением
информации о состоянии системы (см. п. 2).

sql скрипты должны иметь расширение sql, pl/sql - pls. Разделителем
в ps/sql скрипте является знак /.

Обязательно НЕ ЗАБЫТЬ обновить информацию о состоянии системы
в файле `flexbuh-db/flexbuh-common-insert.sql`.


4. Автоматическое обновление выполняется с помощью антовской таски:
ant update-db -Dversion=N.N.N

version - значение текущего состояния системы, т.е. значение `number_revision`
из таблицы `update`.

5. Вручную можно обновить систему с помощью антовской таски:
ant sql.run -Dsql.script=sql_script
или
ant plsql.run -Dsql.script=plsql_script
